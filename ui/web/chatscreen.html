<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/static/css/chatscreen.css">
    <title>TradeWars</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<div id="header">TradeWars!</div>

<div id="wrapper">
    <div id="menu">
        <p class="welcome">Welcome, {{.Callsign}}!<b></b></p>
        <p class="logout"><a id="exit" href="#" onclick="window.location.href = '/map'">Exit Chat</a></p>
    </div>
     
    <div id="chatbox"></div>
    
    <form id="msgarea" action="/chat" method="POST">
        <input type="text" name="usermsg" id="usermsg" placeholder="Message" />
        <button type="submit" id="submitmsg" onclick="sendMsg()">Send!</button>
    </form>
</div>
<!-- <script type="text/javascript" src="/static/js/chat.js"></script> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript">
    var chatLog = document.getElementById("chatbox");
    var usermsg = document.getElementById("usermsg");
    var ws = new WebSocket("ws://localhost:4000/ws");

    function sendMsg() {
        alert("button clicked")
        $.ajax("/newMsg")
    };

    var update = function(){
        ws.onmessage = function (event) {
            alert("This worked!")
            // var longlatArr = event.data.split(" ");
            // long.textContent = longlatArr[1].toString();
            // lat.textContent = longlatArr[0].toString();
        }
    };

</script>

</body>
</html>